# MMA Savant 대시보드 시각화 검토 리포트

### 🔄 차트 개선 피드백

#### #2. 체급별 경기 수 & 피니시율

- **현재**: 가로 바 차트 (경기 수 + 피니시율 오버레이)
- **문제**: "오버레이"는 단위가 다른 두 축(건수 vs %)을 한 차트에 넣는 것인데, 이중 Y축은 사용자 혼란을 줄 수 있음
- **추천**: **Grouped Bar + 별도 라벨** 또는 **Diverging Bar**

```

바 차트 + 오른쪽에 피니시율 도트 플롯 (Recharts의 ComposedChart)
- 바: 경기 수 (왼쪽 Y축)
- 도트/라인: 피니시율 (오른쪽 Y축)
- 이중 축이지만 도트와 바로 시각적 구분이 명확
```

Recharts에서 구현한다면 `ComposedChart` + `Bar` + `Line`(dot만 표시) 조합이 가장 깔끔합니다.

---

#### #6. 경기 종료 라운드 분포

- **현재**: 히스토그램 + 평균값 표시
- **문제**: result_round는 1~5의 이산값이라 전통적 히스토그램보다는 **바 차트**가 더 정확
- **추천**: **세로 바 차트 + ReferenceLine(평균)**

```
추천:
 40% │  ██
     │  ██
 25% │  ██  ██
 15% │  ██  ██  ██
 10% │  ██  ██  ██  ██
  5% │  ██  ██  ██  ██  ██
     └──R1──R2──R3──R4──R5──
              ↑ 평균 2.1R (점선)
```

Recharts `BarChart` + `ReferenceLine`으로 구현하면 됩니다. 각 바에 비율(%)과 건수를 툴팁으로 표시하면 좋습니다.

---

#### #8. 타격 부위별 분포

- **현재**: 스택 바 차트 또는 인체 히트맵
- **추천**: 두 가지 모두 좋지만, 실용성과 개발 비용을 고려하면 **Radar Chart(레이더 차트)** 를 추천

```
이유:
- 인체 히트맵: 시각적으로 인상적이지만 커스텀 SVG 개발 비용이 높음
- 스택 바: 정보 전달은 되지만 5개 부위 비교에 최적은 아님
- 레이더 차트: 5개 축(head/body/leg/clinch/ground)에 딱 맞는 형태

추가 활용:
- 체급 필터 적용 시, 두 체급을 겹쳐서 비교하면 전술 차이가 극적으로 드러남
  예: Heavyweight(head 집중) vs Flyweight(leg/clinch 다양) 비교
```

Recharts의 `RadarChart`로 바로 구현 가능합니다. 만약 시각적 임팩트를 원하면 D3.js로 인체 히트맵을 만드는 것도 좋지만 개발 시간이 많이 듭니다.

#### #13. 서브미션 효율성

- **현재**: 산점도 (X: 시도 수, Y: 피니시 수)
- **문제**: 방향은 좋지만, 산점도만으로는 "효율적인 선수"와 "비효율적인 선수"의 구분이 어려움
- **추천**: **산점도 + 대각선 기준선 + 사분면 라벨**

```
추천 구현:
     피니시 수
      │        ● 효율적 피니셔
      │       ●  (적은 시도, 많은 피니시)
      │     /
      │   / ← 기준선 (평균 효율)
      │  ●
      │ /    ● 비효율적
      │/       (많은 시도, 적은 피니시)
      └──────────────── 시도 수

추가 개선:
- 각 점에 선수 이름 라벨 (TOP 5만 표시하고 나머지는 hover 툴팁)
- 기준선은 전체 평균 효율(피니시/시도) 비율로 그음
- Recharts ScatterChart + ReferenceLine으로 구현 가능
```

---

## 4. 항목 간 중복/유사성 분석

아래 3쌍의 항목이 유사한 인사이트를 제공하므로, 차별화 또는 통합을 고려해보세요.

### 쌍 1: #2 체급별 피니시율 vs #16 체급별 KO/TKO 비율

```
현재 상태:
- #2  = 체급별 총 경기 수 + 전체 피니시율 (KO+TKO+SUB)
- #16 = 체급별 KO/TKO 비율만

문제: 둘 다 "체급별 바 차트"이고 데이터가 거의 겹침

추천: #2를 스택 바 차트로 변경하여 KO/TKO/SUB 비율을 구분 표시
     → #16의 정보를 #2에 흡수시키고 #16 제거 가능
     → 또는 #16을 유지하려면, #2는 순수 "경기 활동량"에 집중 (피니시율 오버레이 제거)
```

@ #2로 통합 후 #16은 삭제

---

## 5. 추가 시각화 아이디어

현재 기획에는 없지만, 기존 DB 테이블로 구현 가능하고 MMA 팬에게 매력적인 항목들입니다.

### 5-1. 선수 스탯 레이더 차트 (Fighter Comparison)

```
활용: Rankings 탭에서 선수 클릭 시 상세 카드로 표시
데이터: match_statistics + strike_detail 집계

        타격 정확도
           ▲
    KO파워 / \ 테이크다운
          /   \
    컨트롤├─────┤유효타격
          \   /
    서브미션 \ / 그라운드
           ▼
        방어율

장점: 선수의 종합 능력치를 한눈에 볼 수 있음 (게임 스탯 느낌)
구현: Recharts RadarChart
```

### 5-2. 최근 이벤트 결과 타임라인 (Recent Events)

```
활용: Overview 탭 하단
데이터: 최근 5개 이벤트의 경기 결과를 타임라인 형태로 표시
장점: "지금 가장 핫한 소식"을 보여줘서 대시보드 재방문 유도
구현: 카드 리스트 (차트 아님)
```

---

## 6. 기술적 개선 포인트

### 6-1. API 호출 최적화

현재 한 탭에 4~5개 엔드포인트를 개별 호출해야 합니다. 초기 로딩 시 병렬 호출(`Promise.all`)은 기본이겠지만, 탭 전환 시 불필요한 재요청을 막기 위해 클라이언트 캐싱(React Query / SWR)을 적용하면 좋습니다.

```python
# 백엔드: 탭별 Aggregate 엔드포인트 추가도 고려
# 예: GET /api/dashboard/striking-tab → #7, #8, #14, #15, #16 데이터를 한 번에 반환
# 장점: 네트워크 라운드트립 감소 (5회 → 1회)
# 단점: 개별 엔드포인트의 재사용성 감소
```

### 6-2. Redis 캐시 키 설계

TTL 7일은 적절하지만, weight_class 필터 조합을 고려한 캐시 키 설계가 필요합니다.

```python
# 캐시 키 예시
cache_key = f"dashboard:{endpoint_name}:wc_{weight_class_id or 'all'}"
# 예: "dashboard:finish-methods:wc_3"
# 예: "dashboard:finish-methods:wc_all"

# leaderboard는 tab + min_fights 조합도 포함
cache_key = f"dashboard:leaderboard:wc_{wc_id or 'all'}:tab_{tab}:min_{min_fights}"
```